<ng-container *ngIf="(infinate$ | async) as infinate; else spinner">
  <cdk-virtual-scroll-viewport itemSize="24" class="flex-grow-1" (scrolledIndexChange)="loadNextUsers($event, infinate.nextLink)">
    <ul class="list-unstyled m-2">
      <li *cdkVirtualFor="let user of infinate.data" class="item">{{ user.displayName }}</li>
    </ul>

    <ng-container *ngTemplateOutlet="spinner"></ng-container>
  </cdk-virtual-scroll-viewport>
</ng-container>

<ng-template #spinner>
  <div *ngIf="loading$ | async" class="spinner-border" role="status">
    <span class="sr-only">Loading...</span>
  </div>
</ng-template>
